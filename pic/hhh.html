<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport"content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><meta http-equiv="X-UA-Compatible"content="IE=edge"/><meta name="HandheldFriendly"content="true"><meta name="msvalidate.01"content="B6C713C1F4E407129EDEF7810A8B9BCB"/><meta name="description"content="用HTML5制作的3D相册，使用鼠标拖拽，能看到3D旋转效果，点击相片，相片能放大，移近。本相册使用了HTML5的画布技术，需要谷歌浏览器或火狐浏览器等现代浏览器才能正常观看。"><meta name="keywords"content="canvas,3D,perspective,texturing,gallery"><style type="text/css">#icon{position:relative;top:6px;left:65px;width:40px;height:40px;overflow:hidden;cursor:pointer;background:#FF9000;border-radius:6px 0 0 0;-moz-transition:all 0.6s ease-in-out 0s;-webkit-transition:all 0.6s ease-in-out 0s;-o-transition:all 0.6s ease-in-out 0s;transition:all 0.6s ease-in-out 0s;}#icon div{position:absolute;background:transparent;}#icon div:nth-child(1){position:absolute;width:0;height:0;top:50%;left:20px;border-width:7px 0 7px 8px;border-style:solid;border-color:transparent#fff;margin-top:-7px;}#icon div:nth-child(2){position:absolute;top:50%;left:12px;width:8px;height:6px;margin-top:-3px;background:#fff;}#nav{position:absolute;top:10px;width:100px;height:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;}#nav-switch{display:none;}#nav.label{display:block;cursor:pointer;}#nav.container{position:absolute;width:100%;left:-100px;-moz-transition:left 0.3s ease-in-out 0s;-webkit-transition:left 0.3s ease-in-out 0s;-o-transition:left 0.3s ease-in-out 0s;transition:left 0.3s ease-in-out 0s;}#nav.container>div{float:left;width:50%;padding:0;}#nav.container.nav-on{padding-left:0;color:#333;}#nav.container.nav-off{width:40px;height:40px;padding-right:10px;}#nav-switch:checked+.label.container{left:10px;}#nav-switch:checked+.label#icon{background:#0065CB;-webkit-transform:rotate(-180deg);-moz-transform:rotate(-180deg);-ms-transform:rotate(-180deg);-o-transform:rotate(-180deg);transform:rotate(-180deg);border-radius:0 0 6px 0;}.title{position:absolute;top:2px;margin:0;padding:0;left:170px;font-size:24px;line-height:40px;height:40px;font-family:"Segoe UI Light","Segoe UI",Frutiger,"Frutiger Linotype","Dejavu Sans","Helvetica Neue",Arial,sans-serif;font-weight:bold;color:#333;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;}.menu{position:relative;left:0;top:6px;list-style-type:none;margin:0;padding:0;font-family:"Segoe UI Light","Segoe UI",Frutiger,"Frutiger Linotype","Dejavu Sans","Helvetica Neue",Arial,sans-serif;font-weight:lighter;color:#333;font-size:1em;cursor:pointer;}.menu li{position:relative;list-style:none;cursor:pointer;width:100px;height:40px;border-right:#ddd solid 1px;}.menu a{position:relative;text-decoration:none;display:block;line-height:40px;color:#333;padding-left:40px;}.menu li a:hover,.menu li a:focus,.menu li a:active{background:#ff9000;}#nav li:before,#nav li:after,#nav li a:before,#nav li a:after{content:"";position:absolute;top:50%;margin-left:10px;}#nav.home a:before{left:2px;border-style:solid;border-color:transparent;border-width:8px 7px;border-bottom-color:#333;margin-top:-16px;}#nav.home a:after{left:4px;width:2px;height:4px;border-style:solid;border-color:#333#333 transparent;border-width:3px 4px 0;margin-top:0;}#nav.arrow a:before{left:8px;border-width:7px 0 7px 8px;border-style:solid;border-color:transparent#333;margin-top:-7px;}#nav.arrow a:after{left:0;width:8px;height:6px;margin-top:-3px;background:#333;}#nav.arrow.back a:before{left:0;border-width:7px 8px 7px 0;}#nav.arrow.back a:after{left:8px;}#nav.list a:before{top:14px;left:5px;width:12px;height:2px;border-width:6px 0;border-style:double;border-color:#333;background:transparent;}#nav.list a:after{top:14px;left:1px;width:2px;height:2px;border-width:6px 0;border-style:double;border-color:#333;background:transparent;}</style><title>用HTML5制作的3D相册</title><style>html{overflow:hidden;-ms-touch-action:none;-ms-content-zooming:none;}body{position:absolute;margin:0px;padding:0px;background:#fff;width:100%;height:100%;}#canvas{position:absolute;width:100%;height:100%;background:#fff;}</style><script type="text/javascript">var ge1doot=ge1doot||{json:null,screen:null,pointer:null,camera:null,loadJS:function(url,callback,data){if(typeof url=="string")url=[url];var load=function(src){var script=document.createElement("script");if(callback){if(script.readyState){script.onreadystatechange=function(){if(script.readyState=="loaded"||script.readyState=="complete"){script.onreadystatechange=null;if(--n===0)callback(data||false);}}}else{script.onload=function(){if(--n===0)callback(data||false);}}}
script.src=src;document.getElementsByTagName("head")[0].appendChild(script);}
for(var i=0,n=url.length;i<n;i++)load(url[i]);}}
ge1doot.Screen=function(setup){ge1doot.screen=this;this.elem=document.getElementById(setup.container)||setup.container;this.ctx=this.elem.tagName=="CANVAS"?this.elem.getContext("2d"):false;this.style=this.elem.style;this.left=0;this.top=0;this.width=0;this.height=0;this.cursor="default";this.setup=setup;this.resize=function(){var o=this.elem;this.width=o.offsetWidth;this.height=o.offsetHeight;for(this.left=0,this.top=0;o!=null;o=o.offsetParent){this.left+=o.offsetLeft;this.top+=o.offsetTop;}
if(this.ctx){this.elem.width=this.width;this.elem.height=this.height;}
this.setup.resize&&this.setup.resize();}
this.setCursor=function(type){if(type!==this.cursor&&'ontouchstart'in window===false){this.cursor=type;this.style.cursor=type;}}
window.addEventListener('resize',function(){ge1doot.screen.resize();},false);!this.setup.resize&&this.resize();}
ge1doot.Pointer=function(setup){ge1doot.pointer=this;var self=this;var body=document.body;var html=document.documentElement;this.setup=setup;this.screen=ge1doot.screen;this.elem=this.screen.elem;this.X=0;this.Y=0;this.Xi=0;this.Yi=0;this.bXi=0;this.bYi=0;this.Xr=0;this.Yr=0;this.startX=0;this.startY=0;this.scale=0;this.wheelDelta=0;this.isDraging=false;this.hasMoved=false;this.isDown=false;this.evt=false;var sX=0;var sY=0;if(setup.tap)this.elem.onclick=function(){return false;}
if(!setup.documentMove){document.ontouchmove=function(e){e.preventDefault();}}
document.addEventListener("MSHoldVisual",function(e){e.preventDefault();},false);if(typeof this.elem.style.msTouchAction!='undefined')this.elem.style.msTouchAction="none";this.pointerDown=function(e){if(!this.isDown){if(this.elem.setCapture)this.elem.setCapture();this.isDraging=false;this.hasMoved=false;this.isDown=true;this.evt=e;this.Xr=(e.clientX!==undefined?e.clientX:e.touches[0].clientX);this.Yr=(e.clientY!==undefined?e.clientY:e.touches[0].clientY);this.X=sX=this.Xr-this.screen.left;this.Y=sY=this.Yr-this.screen.top+((html&&html.scrollTop)||body.scrollTop);this.setup.down&&this.setup.down(e);}}
this.pointerMove=function(e){this.Xr=(e.clientX!==undefined?e.clientX:e.touches[0].clientX);this.Yr=(e.clientY!==undefined?e.clientY:e.touches[0].clientY);this.X=this.Xr-this.screen.left;this.Y=this.Yr-this.screen.top+((html&&html.scrollTop)||body.scrollTop);if(this.isDown){this.Xi=this.bXi+(this.X-sX);this.Yi=this.bYi-(this.Y-sY);}
if(Math.abs(this.X-sX)>11||Math.abs(this.Y-sY)>11){this.hasMoved=true;if(this.isDown){if(!this.isDraging){this.startX=sX;this.startY=sY;this.setup.startDrag&&this.setup.startDrag(e);this.isDraging=true;}else{this.setup.drag&&this.setup.drag(e);}}else{sX=this.X;sY=this.Y;}}
this.setup.move&&this.setup.move(e);}
this.pointerUp=function(e){this.bXi=this.Xi;this.bYi=this.Yi;if(!this.hasMoved){this.X=sX;this.Y=sY;this.setup.tap&&this.setup.tap(this.evt);}else{this.setup.up&&this.setup.up(this.evt);}
this.isDraging=false;this.isDown=false;this.hasMoved=false;this.setup.up&&this.setup.up(this.evt);if(this.elem.releaseCapture)this.elem.releaseCapture();this.evt=false;}
this.pointerCancel=function(e){if(this.elem.releaseCapture)this.elem.releaseCapture();this.isDraging=false;this.hasMoved=false;this.isDown=false;this.bXi=this.Xi;this.bYi=this.Yi;sX=0;sY=0;}
if('ontouchstart'in window){this.elem.ontouchstart=function(e){self.pointerDown(e);return false;}
this.elem.ontouchmove=function(e){self.pointerMove(e);return false;}
this.elem.ontouchend=function(e){self.pointerUp(e);return false;}
this.elem.ontouchcancel=function(e){self.pointerCancel(e);return false;}}
document.addEventListener("mousedown",function(e){if(e.target===self.elem||(e.target.parentNode&&e.target.parentNode===self.elem)||(e.target.parentNode.parentNode&&e.target.parentNode.parentNode===self.elem)){if(typeof e.stopPropagation!="undefined"){e.stopPropagation();}else{e.cancelBubble=true;}
e.preventDefault();self.pointerDown(e);}},false);document.addEventListener("mousemove",function(e){self.pointerMove(e);},false);document.addEventListener("mouseup",function(e){self.pointerUp(e);},false);document.addEventListener('gesturechange',function(e){e.preventDefault();if(e.scale>1)self.scale=0.1;else if(e.scale<1)self.scale=-0.1;else self.scale=0;self.setup.scale&&self.setup.scale(e);return false;},false);if(window.navigator.msPointerEnabled){var nContact=0;var myGesture=new MSGesture();myGesture.target=this.elem;this.elem.addEventListener("MSPointerDown",function(e){if(e.pointerType==e.MSPOINTER_TYPE_TOUCH){myGesture.addPointer(e.pointerId);nContact++;}},false);this.elem.addEventListener("MSPointerOut",function(e){if(e.pointerType==e.MSPOINTER_TYPE_TOUCH){nContact--;}},false);this.elem.addEventListener("MSGestureHold",function(e){e.preventDefault();},false);this.elem.addEventListener("MSGestureChange",function(e){if(nContact>1){if(e.preventDefault)e.preventDefault();self.scale=e.velocityExpansion;self.setup.scale&&self.setup.scale(e);}
return false;},false);}
if(window.addEventListener)this.elem.addEventListener('DOMMouseScroll',function(e){if(e.preventDefault)e.preventDefault();self.wheelDelta=e.detail*10;self.setup.wheel&&self.setup.wheel(e);return false;},false);this.elem.onmousewheel=function(){self.wheelDelta=-event.wheelDelta*.25;self.setup.wheel&&self.setup.wheel(event);return false;}}
window.requestAnimFrame=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(run){window.setTimeout(run,16);};})();</script><script>"use strict";(function(){var diapo=[],layers=[],ctx,pointer,scr,camera,light,fps=0,quality=[1,2],Poly=function(parent,face){this.parent=parent;this.ctx=ctx;this.color=face.fill||false;this.points=[];if(!face.img){for(var i=0;i<4;i++){this.points[i]=new ge1doot.transform3D.Point(parent.pc.x+(face.x[i]*parent.normalZ)+(face.z[i]*parent.normalX),parent.pc.y+face.y[i],parent.pc.z+(face.x[i]*parent.normalX)+(-face.z[i]*parent.normalZ));}
this.points[3].next=false;}},Diapo=function(path,img,structure){this.img=new ge1doot.transform3D.Image(this,path+img.img,1,{isLoaded:function(img){img.parent.isLoaded=true;img.parent.loaded(img);}});this.visible=false;this.normalX=img.nx;this.normalZ=img.nz;this.pc=new ge1doot.transform3D.Point(img.x,img.y,img.z);this.tx=img.x+(img.nx*Math.sqrt(camera.focalLength)*20);this.tz=img.z-(img.nz*Math.sqrt(camera.focalLength)*20);this.poly=[];for(var i=-1,p;p=structure[++i];){layers[i]=(p.img===true?1:2);this.poly.push(new Poly(this,p));}},init=function(json){Poly.prototype.drawPoly=ge1doot.transform3D.drawPoly;scr=new ge1doot.Screen({container:"canvas"});ctx=scr.ctx;scr.resize();pointer=new ge1doot.Pointer({tap:function(){if(camera.over){if(camera.over===camera.target.elem){camera.target.x=0;camera.target.z=0;camera.target.elem=false;}else{camera.target.elem=camera.over;camera.target.x=camera.over.tx;camera.target.z=camera.over.tz;for(var i=0,d;d=diapo[i++];){var dx=camera.target.x-d.pc.x;var dz=camera.target.z-d.pc.z;var dist=Math.sqrt(dx*dx+dz*dz);var lev=(dist>1500)?quality[0]:quality[1];d.img.setLevel(lev);}}}}});camera=new ge1doot.transform3D.Camera({focalLength:Math.sqrt(scr.width)*10,easeTranslation:0.025,easeRotation:0.06,disableRz:true},{move:function(){this.over=false;if(pointer.isDraging){this.target.elem=false;this.target.ry=-pointer.Xi*0.01;this.target.rx=(pointer.Y-scr.height*0.5)/(scr.height*0.5);}else{if(this.target.elem){this.target.ry=Math.atan2(this.target.elem.pc.x-this.x,this.target.elem.pc.z-this.z);}}
this.target.rx*=0.9;}});camera.z=-10000;camera.py=0;for(var i=0,img;img=json.imgdata[i++];){diapo.push(new Diapo(json.options.imagesPath,img,json.structure));}
setInterval(function(){quality=(fps>50)?[2,3]:[1,2];fps=0;},1000);run();},run=function(){ctx.clearRect(0,0,scr.width,scr.height);camera.move();for(var k=-1,l;l=layers[++k];){light=false;for(var i=0,d;d=diapo[i++];){(l===1&&d.draw())||(d.visible&&d.poly[k].draw());}}
if(camera.over&&!pointer.isDraging){scr.setCursor("pointer");}else{scr.setCursor("move");}
fps++;requestAnimFrame(run);};Poly.prototype.draw=function(){var c=this.color;if(c.light||!light){var s=c.light?this.parent.light:1;light="rgba("+
Math.round(c.r*s)+","+
Math.round(c.g*s)+","+
Math.round(c.b*s)+","+(c.a||1)+")";ctx.fillStyle=light;}
if(!c.light||this.parent.light<1){for(var i=0;this.points[i++].projection(););this.drawPoly();ctx.fill();}}
Diapo.prototype.loaded=function(img){var d=[-1,1,1,-1,1,1,-1,-1];var w=img.texture.width*0.5;var h=img.texture.height*0.5;for(var i=0;i<4;i++){img.points[i]=new ge1doot.transform3D.Point(this.pc.x+(w*this.normalZ*d[i]),this.pc.y+(h*d[i+4]),this.pc.z+(w*this.normalX*d[i]));}}
Diapo.prototype.draw=function(){this.pc.projection();if(this.pc.Z>-(camera.focalLength>>1)&&this.img.transform3D(true)){this.light=0.5+Math.abs(this.normalZ*camera.cosY-this.normalX*camera.sinY)*0.6;this.visible=true;this.img.draw();if(pointer.hasMoved||pointer.isDown){if(this.img.isPointerInside(pointer.X,pointer.Y))camera.over=this;}}else this.visible=false;return true;}
return{load:function(data){ge1doot.loadJS("imageTransform3D.js",init,data);}}})().load({imgdata:[{img:'http://b350.photo.store.qq.com/psb?/V10nxKYV4B4zFr/McrOy2spinmIV5kuhoWEt*OCfhIAjgvRCEqwJ5MDc.Y!/b/dH6Sq9DPCgAA&bo=gAJYAwAAAAAFB*0!&rf=viewer_4',x:-1000,y:0,z:1500,nx:0,nz:1},{img:'http://b147.photo.store.qq.com/psb?/V10nxKYV1Bet5y/.msjek*a9YyIQpAe2ARunstzKGGnDmXF*pJuKU1q9RE!/b/dCTFqldxAQAA&bo=gAJxBAAAAAABANA!&rf=viewer_4',x:0,y:0,z:1500,nx:0,nz:1},{img:'http://b146.photo.store.qq.com/psb?/V10nxKYV0MbVtF/g*sYrp2rLm0BMG7HA3mBhMa*fLUjlWAQ7.dD3TQXYx0!/b/dAGdE1cpEwAA&bo=gAJVA7AEQAYBCQg!&rf=viewer_4',x:1000,y:0,z:1500,nx:0,nz:1},{img:'http://b246.photo.store.qq.com/psbe?/V10nxKYV3dHqYG/kay0YcBAP6Z60.aPi0IEiKxdhN6RUMh0pR1zNZWc7owhKYaxfXj4a*WQlig5ylJa/b/dPApopI*CgAA&bo=gAJVAwAAAAABB*Q!&rf=viewer_4',x:1500,y:0,z:1000,nx:-1,nz:0},{img:'http://b246.photo.store.qq.com/psbe?/V10nxKYV3dHqYG/VO8NjSLHG1N3tl3mz5uLSA6j.xtR4ZX8530MZ4EATq62JlgzXlKsdJ7lvqMIqneJ/b/dJ5PqJI2CgAA&bo=VQOAAgAAAAABB*Q!&rf=viewer_4',x:1500,y:0,z:0,nx:-1,nz:0},{img:'http://b146.photo.store.qq.com/psbe?/V10nxKYV0MbVtF/6mhRSVhD*zbK2w03waBn93iw9tzsqHCAvz7cQHk09bGqk9LxeKVIhChhNDLR1GwI/b/dD71CFcrEwAA&bo=VQOAAkAGsAQBCQg!&rf=viewer_4',x:1500,y:0,z:-1000,nx:-1,nz:0},{img:'http://b146.photo.store.qq.com/psbe?/V10nxKYV0MbVtF/3f9L6FhrKqFQG8VCDPqNzIS6kE8W8il*oaRNLt0wTFTzFzA8upHrr0YIZmSVmGI1/b/dESqE1cnEwAA&bo=gAJVA7AEQAYBCQg!&rf=viewer_4',x:1000,y:0,z:-1500,nx:0,nz:-1},{img:'http://b145.photo.store.qq.com/psbe?/V10nxKYV0MbVtF/sAoJUYy0pkmH1l.BWaReE8BI96lKOoNesPfFVlI8CqLazH3nN1*YopHWuC1XfJZJ/b/dG90c1ZYGQAA&bo=gAJVA7AEQAYBCQg!&rf=viewer_4',x:0,y:0,z:-1500,nx:0,nz:-1},{img:'http://b132.photo.store.qq.com/psbe?/V10nxKYV0MbVtF/q*E.5v6RR0vD*jhjQmVEZKasdiA*nM9yhko6NinYsz.83GycC6x8VVozZj0JIK7f/b/dFJKuE7dJQAA&bo=gAJVAwAAAAABB*Q!&rf=viewer_4',x:-1000,y:0,z:-1500,nx:0,nz:-1},{img:'http://b246.photo.store.qq.com/psbe?/V10nxKYV3dHqYG/K*o8DRddorH0wy547Cq*JFZsbl5UIMOLPxXUhFICvrUESR1V3XvrxbfPXabKGxqP/b/dAdHopKOCgAA&bo=VQOAAgAAAAABB*Q!&rf=viewer_4',x:-1500,y:0,z:-1000,nx:1,nz:0},{img:'http://b350.photo.store.qq.com/psbe?/V10nxKYV3dHqYG/j05aTBXiQlLHkXvvPYjCLSm2zhuHSwM4b8FdUGLXPMCwXWlnWrwFOsRHCUtDM*Hh/b/dNR*q9AzDgAA&bo=hANcAoQDXAIFCSo!&rf=viewer_4',x:-1500,y:0,z:0,nx:1,nz:0},{img:'http://b132.photo.store.qq.com/psb?/V10nxKYV1Bet5y/4jcOBa9T82dBOrnKD0sGWIMaVG6lBERGlTE9LDYsiLU!/b/dF96u05iJQAA&bo=VQOAAgAKgAcFCXM!&rf=viewer_4',x:-1500,y:0,z:1000,nx:1,nz:0}],structure:[{fill:{r:255,g:255,b:255,light:1},x:[-1001,-490,-490,-1001],z:[-500,-500,-500,-500],y:[500,500,-500,-500]},{fill:{r:255,g:255,b:255,light:1},x:[-501,2,2,-500],z:[-500,-500,-500,-500],y:[500,500,-500,-500]},{fill:{r:255,g:255,b:255,light:1},x:[0,502,502,0],z:[-500,-500,-500,-500],y:[500,500,-500,-500]},{fill:{r:255,g:255,b:255,light:1},x:[490,1002,1002,490],z:[-500,-500,-500,-500],y:[500,500,-500,-500]},{fill:{r:0,g:0,b:0,a:0.2},x:[-420,420,420,-420],z:[-500,-500,-500,-500],y:[150,150,-320,-320]},{fill:{r:0,g:0,b:0,a:0.2},x:[-20,20,20,-20],z:[-500,-500,-500,-500],y:[250,250,150,150]},{fill:{r:0,g:0,b:0,a:0.2},x:[-20,20,20,-20],z:[-500,-500,-500,-500],y:[-320,-320,-500,-500]},{fill:{r:0,g:0,b:0,a:0.2},x:[-20,20,10,-10],z:[-500,-500,-100,-100],y:[-500,-500,-500,-500]},{fill:{r:32,g:32,b:32},x:[-50,50,50,-50],z:[-150,-150,-50,-50],y:[-500,-500,-500,-500]},{fill:{r:16,g:16,b:16},x:[-10,10,10,-10],z:[-100,-100,-100,-100],y:[300,300,-500,-500]},{fill:{r:255,g:255,b:255},x:[-320,-320,-320,-320],z:[0,-20,-20,0],y:[-190,-190,190,190]},{fill:{r:255,g:255,b:255},x:[320,320,320,320],z:[0,-20,-20,0],y:[-190,-190,190,190]},{img:true},{fill:{r:255,g:128,b:0},x:[-50,50,50,-50],z:[450,450,550,550],y:[500,500,500,500]},{fill:{r:255,g:128,b:0},x:[-50,50,50,-50],z:[450,450,550,550],y:[-500,-500,-500,-500]}],options:{imagesPath:""}});</script>
<h1 style="background-color:#8B8B8B;color:green;text-align:centre;width:300px;">最美的年华--送给自己<br>For My Brithday</h1></head><body><canvas id="canvas">你的浏览器不支持HTML5画布技术，请使用谷歌浏览器。</canvas></body></html>
